{% extends 'projects/base.html' %}

{% block content %}

<h1>Report from {{ from }} to {{ to }}</h1>

{% if client %}
<p>Subsetted for Client: {{ client }}</p>
{% endif %}

{% if project %}
<p>Subsetted for Project: {{ project }}</p>
{% endif %}

{% if sessions %}

<h2 class="text-center">Total earned: {{ total_earned }}â‚¬</h2>

<table class="table table-condensed table-hover table-bordered table-striped">

  <thead>
    <tr>
      <th scope="col">Session Date</th>
      <th scope="col">Client</th>
      <th scope="col">Units</th>
      <th scope="col">Earned</th>
    </tr>
  </thead>
  
  {% for session in sessions %}
  <tr>
    <td>
      <a href="{% url 'projects:session-detail' session.id %}">{{ session.date }}</a>
    </td>
    <td>
      {{ session.project.client }}
    </td>
    <td>
      {{ session.units_worked | floatformat:"-2" }} {{ session.project.rate_unit }}{% if session.units_worked != 1 %}s{% endif %}
    </td>
    <td>
      {{ session.get_money_earned | floatformat:"2" }}
    </td>
  </tr>
  {% endfor %}
</table>
{% else %}
<p>Selected timespan had no sessions. You lazy!</p>
{% endif %}

{% endblock %}
